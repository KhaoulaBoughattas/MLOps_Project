stages:
  preprocess:
    cmd: python src/data_preprocessing.py
    deps:
      - data/secom
      - src/data_preprocessing.py
    outs:
      - data/processed

  features:
    cmd: python src/feature_engineering.py
    deps:
      - data/processed/clean_data.csv
      - src/feature_engineering.py
    outs:
      - data/features/engineered_data.csv

  train:
    cmd: python src/train_model.py
    deps:
      - data/features/engineered_data.csv
      - src/train_model.py
    outs:
      - models/rf_model.pkl
      - models/rf_model_features.pkl

  predict:
    cmd: python src/predict.py
    deps:
      - data/features/engineered_data.csv
      - models/rf_model.pkl
      - models/rf_model_features.pkl
      - src/predict.py
    outs:
      - data/predictions/preds.csv

  evaluate:
    cmd: python src/evaluate.py
    deps:
      - data/features/engineered_data.csv
      - data/predictions/preds.csv
      - src/evaluate.py
    outs:
      - reports/classification_report.txt
      - reports/confusion_matrix.png
